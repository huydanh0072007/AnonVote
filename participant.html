<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tham gia cu·ªôc h·ªçp - AnonVote</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#6366f1',
                        secondary: '#a855f7',
                    }
                }
            }
        }
    </script>
    <link rel="stylesheet" href="css/style.css">
    <script src="https://unpkg.com/lucide@latest"></script>
</head>

<body class="bg-gray-900 text-white min-h-screen flex flex-col items-center justify-center p-4">
    <div id="app" class="max-w-md w-full relative z-10">
        <!-- Step 1: PIN Entry -->
        <div id="pinScreen" class="glass-card p-8 text-center">
            <h1 id="roomNameDisplay" class="text-2xl font-bold mb-2">ƒêang t·∫£i...</h1>
            <p class="text-gray-400 text-sm mb-8 italic">Nh·∫≠p m√£ PIN hi·ªÉn th·ªã tr√™n m√†n h√¨nh host ƒë·ªÉ tham gia</p>

            <div id="pinInputContainer" class="flex flex-col gap-6">
                <!-- PIN Type: Number vs Icon will be handled by JS -->
                <div id="pinNumbers" class="hidden">
                    <input type="text" maxlength="4" id="pinInput" placeholder="0000"
                        class="w-full bg-gray-800/50 border border-gray-700 p-4 rounded-xl text-center text-3xl font-mono tracking-[1rem] focus:outline-none focus:ring-2 focus:ring-primary">
                </div>

                <div id="pinIcons" class="hidden">
                    <div class="grid grid-cols-4 gap-4 mb-4">
                        <button data-icon="üçé"
                            class="icon-btn text-2xl p-3 bg-white/5 border border-white/10 rounded-xl hover:bg-white/10">üçé</button>
                        <button data-icon="‚≠ê"
                            class="icon-btn text-2xl p-3 bg-white/5 border border-white/10 rounded-xl hover:bg-white/10">‚≠ê</button>
                        <button data-icon="üöÄ"
                            class="icon-btn text-2xl p-3 bg-white/5 border border-white/10 rounded-xl hover:bg-white/10">üöÄ</button>
                        <button data-icon="üíé"
                            class="icon-btn text-2xl p-3 bg-white/5 border border-white/10 rounded-xl hover:bg-white/10">üíé</button>
                        <button data-icon="üçÄ"
                            class="icon-btn text-2xl p-3 bg-white/5 border border-white/10 rounded-xl hover:bg-white/10">üçÄ</button>
                        <button data-icon="üî•"
                            class="icon-btn text-2xl p-3 bg-white/5 border border-white/10 rounded-xl hover:bg-white/10">üî•</button>
                        <button data-icon="üåà"
                            class="icon-btn text-2xl p-3 bg-white/5 border border-white/10 rounded-xl hover:bg-white/10">üåà</button>
                        <button data-icon="üéÅ"
                            class="icon-btn text-2xl p-3 bg-white/5 border border-white/10 rounded-xl hover:bg-white/10">üéÅ</button>
                    </div>
                    <div id="selectedIcons"
                        class="h-12 bg-gray-800/50 rounded-xl flex items-center justify-center gap-4 text-2xl">
                        <!-- Selected icons will appear here -->
                    </div>
                </div>

                <p id="pinError" class="text-red-400 text-sm hidden">M√£ PIN kh√¥ng ƒë√∫ng ho·∫∑c ƒë√£ h·∫øt h·∫°n!</p>

                <button id="btnVerifyPin"
                    class="bg-primary hover:bg-primary/80 text-white py-3 rounded-xl font-semibold transition-all shadow-lg">
                    X√°c nh·∫≠n m√£ b·∫£o v·ªá
                </button>
            </div>
        </div>

        <!-- Step 2: Content Screen -->
        <div id="mainContent" class="hidden glass-card min-h-[600px] flex flex-col p-0 overflow-hidden shadow-2xl">
            <!-- Header Info -->
            <div class="px-6 py-4 bg-white/3 flex items-center justify-between border-b border-white/5">
                <div class="flex items-center gap-3">
                    <div class="w-8 h-8 rounded-full bg-primary/20 flex items-center justify-center">
                        <i data-lucide="users" class="text-primary" size="16"></i>
                    </div>
                    <div>
                        <span
                            class="text-[9px] font-bold uppercase text-gray-400 tracking-wider block leading-tight">Ph√≤ng
                            h·ªçp</span>
                        <h2 id="roomNameTitle" class="text-xs font-bold text-white truncate max-w-[150px]">---</h2>
                    </div>
                </div>
                <div class="flex items-center gap-2">
                    <span
                        class="flex items-center gap-1.5 text-green-400 text-[9px] font-bold bg-green-500/10 px-2 py-1 rounded-full border border-green-500/20">
                        <span class="w-1.5 h-1.5 rounded-full bg-green-400 animate-pulse"></span> TR·ª∞C TUY·∫æN
                    </span>
                </div>
            </div>

            <!-- Tabs -->
            <div class="flex p-2 gap-2 bg-black/20">
                <button id="tabPolls"
                    class="tab-btn flex-1 py-3 px-4 rounded-xl text-xs font-bold transition-all flex items-center justify-center gap-2 bg-primary text-white shadow-lg shadow-primary/20">
                    <i data-lucide="vote" size="14"></i> B√¨nh ch·ªçn
                </button>
                <button id="tabQA"
                    class="tab-btn flex-1 py-3 px-4 rounded-xl text-xs font-bold transition-all flex items-center justify-center gap-2 text-gray-400 hover:text-white hover:bg-white/5">
                    <i data-lucide="message-circle" size="14"></i> H·ªèi ƒë√°p
                </button>
            </div>

            <div class="flex-1 flex flex-col overflow-hidden">
                <!-- Content Area -->
                <div id="tabContent" class="flex-1 overflow-y-auto p-6 no-scrollbar">
                    <!-- Polls Tab -->
                    <div id="pollTab" class="animate-fade-in">
                        <div id="pollDisplay"
                            class="w-full flex flex-col items-center justify-center text-center py-20">
                            <i data-lucide="hourglass" size="40" class="text-gray-600 mb-6 animate-spin-slow"></i>
                            <h2 class="text-lg font-bold text-white">ƒêang ch·ªù Host b·∫Øt ƒë·∫ßu...</h2>
                            <p class="text-xs text-gray-500 mt-2 leading-relaxed">Vui l√≤ng gi·ªØ k·∫øt n·ªëi. C√°c cu·ªôc b√¨nh
                                ch·ªçn s·∫Ω xu·∫•t hi·ªán t·ª± ƒë·ªông t·∫°i ƒë√¢y.</p>
                        </div>
                    </div>

                    <!-- Q&A Tab -->
                    <div id="qaTab" class="hidden animate-fade-in flex flex-col gap-6">
                        <div class="bg-white/5 rounded-2xl p-4 border border-white/5">
                            <textarea id="qaInput" placeholder="B·∫°n mu·ªën ƒë√≥ng g√≥p √Ω ki·∫øn g√¨?"
                                class="w-full bg-transparent border-none p-0 focus:ring-0 text-sm placeholder:text-gray-600 resize-none h-24 mb-3"
                                style="outline: none !important;"></textarea>
                            <div class="flex justify-between items-center">
                                <span class="text-[10px] text-gray-500 flex items-center gap-1 italic">
                                    <i data-lucide="shield" size="10"></i> Danh t√≠nh lu√¥n ·∫©n danh
                                </span>
                                <button id="btnSendQA"
                                    class="bg-primary hover:bg-primary-hover px-6 py-2 rounded-xl text-xs font-bold transition-all flex items-center gap-2 shadow-lg shadow-primary/20">
                                    <i data-lucide="send" size="12"></i> G·ª≠i √Ω ki·∫øn
                                </button>
                            </div>
                        </div>
                        <div id="qaList" class="flex flex-col gap-4">
                            <!-- Questions will be rendered here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Copyright Footer -->
        <footer class="mt-8 py-4 text-center text-gray-600 text-[10px] uppercase tracking-[0.2em] relative z-10 w-full">
            &copy; 2026, Ph√≤ng martech - Ban Marketing
        </footer>
    </div>

    <!-- Background Gradients -->
    <div class="absolute top-[-10%] left-[-10%] w-[40%] h-[40%] bg-primary/10 rounded-full blur-[120px]"></div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="js/supabase-config.js"></script>
    <script src="js/participant.js"></script>
    <script>lucide.createIcons();</script>
</body>

</html>