<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tham gia cu·ªôc h·ªçp - AnonVote</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#6366f1',
                        secondary: '#a855f7',
                    }
                }
            }
        }
    </script>
    <link rel="stylesheet" href="css/style.css">
    <script src="https://unpkg.com/lucide@latest"></script>
</head>

<body class="bg-gray-900 text-white min-h-screen flex flex-col items-center justify-center p-4">
    <div id="app" class="max-w-md w-full relative z-10">
        <!-- Step 1: PIN Entry -->
        <div id="pinScreen" class="glass-card p-8 text-center">
            <h1 id="roomNameDisplay" class="text-2xl font-bold mb-2">ƒêang t·∫£i...</h1>
            <p class="text-gray-400 text-sm mb-8 italic">Nh·∫≠p m√£ PIN hi·ªÉn th·ªã tr√™n m√†n h√¨nh host ƒë·ªÉ tham gia</p>

            <div id="pinInputContainer" class="flex flex-col gap-6">
                <!-- PIN Type: Number vs Icon will be handled by JS -->
                <div id="pinNumbers" class="hidden">
                    <input type="text" maxlength="4" id="pinInput" placeholder="0000"
                        class="w-full bg-gray-800/50 border border-gray-700 p-4 rounded-xl text-center text-3xl font-mono tracking-[1rem] focus:outline-none focus:ring-2 focus:ring-primary">
                </div>

                <div id="pinIcons" class="hidden">
                    <div class="grid grid-cols-4 gap-4 mb-4">
                        <button data-icon="üçé"
                            class="icon-btn text-2xl p-3 bg-white/5 border border-white/10 rounded-xl hover:bg-white/10">üçé</button>
                        <button data-icon="‚≠ê"
                            class="icon-btn text-2xl p-3 bg-white/5 border border-white/10 rounded-xl hover:bg-white/10">‚≠ê</button>
                        <button data-icon="üöÄ"
                            class="icon-btn text-2xl p-3 bg-white/5 border border-white/10 rounded-xl hover:bg-white/10">üöÄ</button>
                        <button data-icon="üíé"
                            class="icon-btn text-2xl p-3 bg-white/5 border border-white/10 rounded-xl hover:bg-white/10">üíé</button>
                        <button data-icon="üçÄ"
                            class="icon-btn text-2xl p-3 bg-white/5 border border-white/10 rounded-xl hover:bg-white/10">üçÄ</button>
                        <button data-icon="üî•"
                            class="icon-btn text-2xl p-3 bg-white/5 border border-white/10 rounded-xl hover:bg-white/10">üî•</button>
                        <button data-icon="üåà"
                            class="icon-btn text-2xl p-3 bg-white/5 border border-white/10 rounded-xl hover:bg-white/10">üåà</button>
                        <button data-icon="üéÅ"
                            class="icon-btn text-2xl p-3 bg-white/5 border border-white/10 rounded-xl hover:bg-white/10">üéÅ</button>
                    </div>
                    <div id="selectedIcons"
                        class="h-12 bg-gray-800/50 rounded-xl flex items-center justify-center gap-4 text-2xl">
                        <!-- Selected icons will appear here -->
                    </div>
                </div>

                <p id="pinError" class="text-red-400 text-sm hidden">M√£ PIN kh√¥ng ƒë√∫ng ho·∫∑c ƒë√£ h·∫øt h·∫°n!</p>

                <button id="btnVerifyPin"
                    class="bg-primary hover:bg-primary/80 text-white py-3 rounded-xl font-semibold transition-all shadow-lg">
                    X√°c nh·∫≠n m√£ b·∫£o v·ªá
                </button>
            </div>
        </div>

        <!-- Step 2: Waiting Room / Content Screen -->
        <div id="mainContent" class="hidden glass-card min-h-[500px] flex flex-col p-0 overflow-hidden">
            <!-- Top Navigation Tabs -->
            <div class="flex border-b border-white/5 bg-white/5">
                <button id="tabPolls"
                    class="tab-btn flex-1 py-4 text-sm font-bold transition-all border-b-2 border-primary text-white bg-white/5">
                    B√¨nh ch·ªçn
                </button>
                <button id="tabQA"
                    class="tab-btn flex-1 py-4 text-sm font-bold transition-all border-b-2 border-transparent text-gray-500 hover:text-gray-300">
                    H·ªèi ƒë√°p
                </button>
            </div>

            <div class="p-6 flex-1 flex flex-col">
                <div class="flex items-center justify-between mb-6 pb-2 border-b border-white/5">
                    <span class="text-[10px] font-bold uppercase text-gray-400 tracking-widest"
                        id="currentRoomLabel">Ph√≤ng h·ªçp</span>
                    <span class="flex items-center gap-1 text-green-400 text-[9px] font-bold animate-pulse">
                        <i data-lucide="circle" size="6" fill="currentColor"></i> ƒê√É K·∫æT N·ªêI
                    </span>
                </div>

                <!-- Content Area -->
                <div id="tabContent" class="flex-1 overflow-y-auto">
                    <!-- Polls Tab -->
                    <div id="pollTab" class="flex flex-col items-center justify-center text-center py-10">
                        <div id="pollDisplay" class="w-full">
                            <i data-lucide="clock" size="48" class="text-gray-600 mb-4 mx-auto"></i>
                            <h2 class="text-xl font-semibold">ƒêang ƒë·ª£i Host...</h2>
                            <p class="text-sm text-gray-500 mt-2">D√πng tab "H·ªèi ƒë√°p" ƒë·ªÉ g·ª≠i √Ω ki·∫øn trong l√∫c ch·ªù ƒë·ª£i.
                            </p>
                        </div>
                    </div>

                    <!-- Q&A Tab -->
                    <div id="qaTab" class="hidden flex flex-col gap-4 py-2">
                        <div class="flex flex-col gap-3">
                            <textarea id="qaInput" placeholder="Nh·∫≠p c√¢u h·ªèi ho·∫∑c √Ω ki·∫øn c·ªßa b·∫°n..."
                                class="w-full bg-white/5 border border-white/10 p-4 rounded-xl focus:outline-none focus:border-primary h-28 text-sm transition-all"></textarea>
                            <button id="btnSendQA"
                                class="bg-primary hover:bg-primary/80 py-3 rounded-xl text-sm font-bold transition-all shadow-lg shadow-primary/20">
                                G·ª≠i √Ω ki·∫øn ·∫©n danh
                            </button>
                        </div>
                        <div id="qaList" class="flex flex-col gap-3 mt-4">
                            <!-- Questions will go here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Background Gradients -->
    <div class="absolute top-[-10%] left-[-10%] w-[40%] h-[40%] bg-primary/10 rounded-full blur-[120px]"></div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="js/supabase-config.js"></script>
    <script src="js/participant.js"></script>
    <script>lucide.createIcons();</script>
</body>

</html>